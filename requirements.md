# 🏗️ 母女沟通播客平台小程序（women俩） 功能模块设计文档

---

## 🎯 产品设计目标
> 现在你是产品架构师，我要设计一个 **母女沟通播客平台小程序**（women俩）。  
> 请基于 MVP 原则（最小可行产品）与最低开发成本进行设计。

目标：
- 帮助母女通过共听播客、实时语音和文字互动，促进理解与情感修复。
- 让她们在倾听与表达的过程中形成持续的沟通习惯。
- 通过 AI 自动生成「母女回顾播客」，沉淀独属于她们的共同记忆。

---

## 🌐 产品整体框架与核心业务逻辑

### 核心价值流程
1️⃣ 用户进入首页，选择想听的播客  
2️⃣ 点击「一起听」，发起共听会话并邀请母亲/女儿  
3️⃣ 播放中可实时长按对话键进行对话、发送弹幕表情和文字评论  
4️⃣ 播放结束后系统自动保存互动记录  
5️⃣ 用户可在「回顾页」查看音频/文字回放、生成回顾播客  
6️⃣ 推荐页提供精选女性议题播客与影片解读内容，鼓励二次共听与讨论  

### 核心界面：
- **首页**：推荐播客卡片 + 一键共听入口  
- **播放页**：实时语音 + 弹幕互动 + 模式切换（Casual / 正式对谈）  
  > ✅ **新增内容：方形随机小鸟图片显示**  
  - 播放页中增加一个方形区域（正方形封面展示区），每次进入播放页时随机显示一张真实鸟类图片。  
  - 无论播放哪一档播客，播放页的背景图片均为随机生成的小鸟图片，体现“倾听自然、疗愈心绪”的主题。  
  - 弹幕将在该图片区域内轻盈飘动，形成“声音与自然共鸣”的动态视觉效果。  
  - 图片来源可调用开放鸟类摄影图库（如 Unsplash API 中的 bird 标签）。  

- **回顾页**：shownotes + 音频回放 + 弹幕浮动回忆  
- **推荐页**：女性主题播客与共听邀请入口  

体验原则：
- “先体验，后注册”，母女双方可通过分享链接直接进入共听会话。
- 强调温度感与陪伴感的UI氛围：双头像、柔色渐变、声音波形、自然意象。

---

## ⭐ 功能优先级评分标准（MVP 原则）

| 分值 | 优先级定义 | 说明 |
|------|--------------|------|
| 5️⃣ | 核心功能 | 没有此功能，产品无法满足基本用户需求 |
| 4️⃣ | 重要功能 | 显著提升产品价值，应尽量在 MVP 中实现 |
| 3️⃣ | 有价值功能 | 改善体验，可在 MVP 后期添加 |
| 2️⃣ | 次要功能 | 用户量增长后再实现 |
| 1️⃣ | 锦上添花功能 | 产品成熟后考虑 |

---

## 🧱 功能模块设计要求

### 模块说明表

| 模块名称 | 模块类型 | 主要用途 | 场景 | 依赖关系 | 优先级 | 输入 | 输出 | 所在界面 | 可复用性 |
|-----------|------------|------------|------------|------------|------------|------------|------------|------------|------------|
| 共听播放模块 | 界面层 | 同步播放播客并建立语音通话 | 播放页 | 用户登录模块 | 5️⃣ | 播客资源URL、房间号 | 实时音频流 | 播放页 | ✅ |
| 实时语音模块 | 组件层 | 母女语音交流 | 播放页 | 共听播放模块 | 5️⃣ | 音频输入 | WebRTC音频流 | 播放页 | ✅ |
| 弹幕互动模块 | 组件层 | 实时表情与文字评论显示 | 播放页 | 用户身份模块 | 4️⃣ | 用户输入 | 弹幕显示 | 播放页 | ✅ |
| 🎨 小鸟图片展示模块 | 组件层 | 随机显示真实鸟类图片并承载弹幕效果 | 播放页 | 播客播放模块 | 3️⃣ | 无（随机数触发） | 鸟类图片显示 | 播放页 | ✅ |
| 正式对谈会议室 | 界面层 | 深度语音对谈模式 | 播放页下拉 | 实时语音模块 | 4️⃣ | 用户点击 | 新会话房间 | 独立页面 | ❌ |
| 互动回顾生成逻辑 | 业务流程层 | 自动生成播客回顾节目 | 回顾页 | 数据层 | 5️⃣ | 语音记录、弹幕数据 | 新音频文件 + shownotes | 回顾页 | ❌ |
| AI 摘要模块 | 业务流程层 | 自动生成shownotes摘要 | 回顾页 | Whisper + ChatGPT API | 4️⃣ | 音频文字转录 | 对话要点摘要 | 回顾页 | ✅ |
| 播客推荐模块 | 界面层 | 推荐女性议题播客 | 首页 / 推荐页 | 数据层 | 3️⃣ | 推荐算法 | 播客列表 | 首页 | ✅ |
| 共听邀请模块 | 业务流程层 | 邀请母女共听 | 首页 / 推荐页 | 用户系统 | 4️⃣ | 邀请对象ID | 会话链接 | 推荐页 | ✅ |
| 用户数据表 | 数据层 | 存储用户与互动数据 | 系统全局 | 无 | 5️⃣ | API写入 | JSON响应 | 全局 | ❌ |

---

## 🧩 功能模块详细说明模板（示例）

### 模块名称
**小鸟图片展示模块**

**类型：** 组件层  
**主要用途：** 随机显示真实鸟类图片，提供弹幕承载背景  
**关键场景：** 播放页加载时，展示一张随机鸟类图片作为播放背景方块  
**依赖关系：** 播放页加载事件、图片资源API  
**优先级评分：** 3️⃣（提升视觉体验与情绪共鸣）  
**输入内容：** 无（系统随机触发）  
**输出内容：** 图片显示 + 弹幕浮动效果  
**所在界面及复用情况：** 播放页，独立模块，可扩展为主题皮肤功能  

---

## 📊 模块关系图（Mermaid 流程图）

```mermaid
flowchart TD

subgraph 首页
    A[推荐播客卡片] --> B[发起共听入口]
end

subgraph 播放页
    B --> C[共听播放模块]
    C --> D[实时语音模块]
    C --> E[弹幕互动模块]
    E --> F[数据记录逻辑]
    C --> G[正式对谈会议室]
    C --> H[小鸟图片展示模块]
    E --> H
end

subgraph 回顾页
    F --> I[互动回顾生成逻辑]
    I --> J[AI 摘要模块]
    J --> K[shownotes展示 + 背景音乐播客]
end

subgraph 推荐页
    A --> L[播客推荐模块]
    L --> M[共听邀请模块]
end

E -.-> X[通用弹幕组件]
C -.-> X
X -.-> F

H -.-> E

#代码质量要求

1. 代码组织结构：
    - 模块化设计，分离HTML/CSS/JS
    - 清晰的代码层次结构
2. 编码规范：
    - 充分的代码注释
    - 合理的变量命名
    - 错误处理机制

#交付要求

1. 提供完整的应用程序代码，包含：
    - HTML结构
    - CSS样式
    - JavaScript逻辑
2. 如需引用外部资源，请注明来源和使用方式
3. 重要算法和逻辑需要有详细注释说明