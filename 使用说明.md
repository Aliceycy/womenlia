# women俩 - 使用说明

## 项目介绍

「women俩」是一个专为母女沟通设计的播客共听平台。通过播客共听、实时语音对话、弹幕互动等功能，帮助母女两代人在倾听中找到共鸣，在对话中修复关系。

## 快速启动

### 第一步：安装依赖

```bash
cd womenlia_claude
npm install
```

### 第二步：配置数据库（可选）

如果想使用完整功能，需要配置MySQL数据库：

1. 启动MySQL服务
2. 创建数据库：
```bash
mysql -u root -p < server/database.sql
```

如果不配置数据库，应用仍可运行，但数据不会持久化保存。

### 第三步：启动服务器

```bash
npm start
```

服务器启动后，会显示：
```
🌸 women俩 服务器启动成功！
📍 HTTP服务: http://localhost:3000
📍 WebSocket: ws://localhost:3000
```

### 第四步：访问应用

在浏览器中打开：**http://localhost:3000**

## 核心功能使用

### 1. 首页 - 选择播客

- 浏览精选播客卡片
- 点击「一起听」按钮发起共听邀请
- 选择通过链接或二维码邀请对方

### 2. 播放页 - 共听互动

#### 🎨 随机小鸟图片
- 每次进入播放页会随机显示一张鸟类图片
- 营造自然疗愈的视觉氛围
- 弹幕会在图片上飘动

#### 🎤 实时语音
- **长按「长按说话」按钮**开启麦克风
- 松开结束录音
- 对方会实时听到你的声音

#### 💬 弹幕互动
- 在底部输入框输入文字
- 点击「发送」按钮，弹幕会飘过屏幕
- 对方能实时看到你的弹幕

#### ❤️ 表情互动
- 快速点击表情按钮发送常用表情
- 点击「➕」查看更多表情
- 表情会以动画形式展示

#### 🔄 播放同步
- 播放进度自动与对方同步
- 暂停、快进、快退都会实时同步
- 确保双方听到同样的内容

#### 🎙️ 模式切换
- **随意模式**：轻松的语音对话
- **正式对谈**：点击切换到专注的对话界面
  - 显示声音波形
  - 可控制麦克风和扬声器
  - 适合深度对话

### 3. 回顾页 - 重温对话

- 查看所有共听记录
- 每条记录显示：
  - 播客名称和时间
  - 共听时长
  - 对话次数和表情数
  - 是否已生成回顾播客

### 4. 回顾详情 - 珍藏记忆

#### 📝 Shownotes（对话要点）
- 自动记录关键对话时刻
- 显示时间戳和内容摘要
- 点击「AI智能生成摘要」按钮可优化内容

#### 🎧 回顾播客
- 系统自动将你们的对话生成新播客
- 可以回听完整音频
- 支持下载和分享

#### 💬 对话记录回放
- 完整保留所有语音对话
- 支持播放语音消息
- 显示文字转录内容
- 重现表情和弹幕互动

#### 💖 情感分析
- AI分析对话中的情感指标
- 温暖度、共鸣度、理解度评分
- 提供情感改善建议

## 使用场景示例

### 场景1：晚上睡前共听

**云云（女儿）**：
1. 打开首页，选择「鲁豫对话小帕」播客
2. 点击「一起听」，选择「分享链接」
3. 将链接发送给云妈
4. 等待云妈进入房间

**云妈**：
1. 点击云云发来的链接
2. 自动进入播放页
3. 看到随机显示的小鸟图片和女儿头像

**共同体验**：
- 同步播放播客
- 听到感动的地方，长按说话分享感受
- 发送爱心表情
- 输入文字弹幕表达想法

### 场景2：周末下午回顾

**云云**：
1. 打开「回顾」页面
2. 点击上次的共听记录
3. 查看Shownotes，回忆对话要点
4. 播放回顾播客，重温温暖时刻
5. 点击「分享」，发朋友圈或保存到相册

## 技术要求

### 浏览器要求
- Chrome 90+ （推荐）
- Safari 14+
- Edge 90+
- Firefox 88+

### 权限要求
- **麦克风权限**：用于语音对话
- **网络连接**：用于实时同步

### 最佳使用环境
- 稳定的WiFi或4G/5G网络
- 安静的环境（语音对话时）
- 佩戴耳机（避免回音）

## 常见问题

### Q: 对方听不到我的声音？
**A**: 请检查：
1. 是否授予了麦克风权限
2. 麦克风是否被其他应用占用
3. 是否正确长按了「长按说话」按钮
4. 网络连接是否稳定

### Q: 小鸟图片加载失败？
**A**: 小鸟图片来自Unsplash图库，需要网络连接。如果加载失败会自动使用备用图片。

### Q: 弹幕没有飘过去？
**A**: 请确保：
1. 双方都在同一个会话中
2. WebSocket连接正常（查看控制台）
3. 输入内容后点击了「发送」按钮

### Q: 播放进度不同步？
**A**: 系统会自动同步，但可能有1-2秒延迟。如果一直不同步，请刷新页面重新进入。

### Q: 如何退出会话？
**A**: 直接关闭页面或点击返回按钮即可。系统会自动保存记录。

### Q: 回顾播客在哪里？
**A**: 打开「回顾」页面，点击任意共听记录，进入详情页可查看和播放回顾播客。

## 隐私说明

- 所有对话内容仅保存在服务器，不会分享给第三方
- 语音数据加密传输
- 可随时删除历史记录
- 不会收集额外个人信息

## 联系我们

如有问题或建议，请联系：
- 邮箱: support@womenlia.com（示例）
- 微信: womenlia_official（示例）

## 温馨提示

1. **请在安静环境使用**，获得更好的语音体验
2. **佩戴耳机**可避免回音问题
3. **保持网络稳定**，确保实时同步
4. **定期查看回顾**，珍藏美好记忆
5. **分享给朋友**，让更多母女感受陪伴的温暖

---

**women俩** | 用声音连接两代女性，用理解修复代际关系 💕

听见彼此，理解对方 🌸

